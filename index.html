<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href="https://mbtiexplain.netlify.app/">
    <title>상대방의 말, 진짜 의미는? - MBTI 대처법</title>
    <meta name="description" content="상대방이 '괜찮아'라고 할 때 진짜 의미와 대처법">
    <meta property="og:type" content="website">
    <meta property="og:title" content="🚨 여자친구가 '괜찮아' 할 때 진짜 의미는?">
    <meta property="og:description" content="ISTJ: 정말 괜찮음 ✅ vs INFP: 엄청 화남 💥 | 대처법 모르면 관계 끝! MBTI별 진짜 속마음 256가지">
    <meta property="og:image" content="https://mbtiexplain.netlify.app/og-image.png">
    <meta property="og:url" content="https://mbtiexplain.netlify.app/">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="🚨 여자친구가 '괜찮아' 할 때 진짜 의미는?">
    <meta name="twitter:description" content="MBTI별 진짜 속마음과 올바른 대처법 256가지">
    <meta name="twitter:image" content="https://mbtiexplain.netlify.app/og-image.png">

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8245797797545485"
     crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body class="container">
    <!-- 시작화면 -->
    <article class="start">
        <h1 class="text-center mb-2">MBTI 관계 도우미</h1>
        <p class="text-center text-muted mb-5">어떤 도움이 필요하세요?</p>

        <div class="feature-grid">
            <div class="feature-card" onclick="startTranslator()">
                <div class="feature-icon">💬</div>
                <h3 class="feature-title">속마음 번역기</h3>
                <p class="feature-desc">"괜찮아"의 진짜 의미는?</p>
            </div>

            <div class="feature-card" onclick="startQuizFlow()">
                <div class="feature-icon">⚡</div>
                <h3 class="feature-title">1분 MBTI 퀴즈</h3>
                <p class="feature-desc">빠르게 MBTI 알아보기</p>
            </div>

            <div class="feature-card" onclick="startSimulatorFlow()">
                <div class="feature-icon">🎮</div>
                <h3 class="feature-title">갈등 시뮬레이터</h3>
                <p class="feature-desc">상황별 대처법 연습</p>
            </div>

            <div class="feature-card" onclick="startGiftFlow()">
                <div class="feature-icon">💝</div>
                <h3 class="feature-title">선물 추천</h3>
                <p class="feature-desc">MBTI별 완벽한 선물</p>
            </div>

            <div class="feature-card" onclick="startDateFlow()">
                <div class="feature-icon">💑</div>
                <h3 class="feature-title">데이트 코스</h3>
                <p class="feature-desc">맞춤 데이트 플랜</p>
            </div>

            <div class="feature-card" onclick="startCompatFlow()">
                <div class="feature-icon">💕</div>
                <h3 class="feature-title">궁합 테스트</h3>
                <p class="feature-desc">우리의 MBTI 궁합은?</p>
            </div>

            <div class="feature-card" onclick="window.location.href='https://lifecode.nomadlab.kr'">
                <div class="feature-icon">🧬</div>
                <h3 class="feature-title">라이프 코드</h3>
                <p class="feature-desc">나의 생명 코드 분석</p>
            </div>
        </div>

        <!-- AdSense Ad -->
        <div class="mt-5 text-center">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8245797797545485"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </article>

    <!-- 관계 선택 -->
    <article class="relationship-selector">
        <h2 class="mt-5 text-center mb-3">누구를 이해하고 싶나요?</h2>
        <p class="text-center text-muted mb-4">한 번만 클릭하면 됩니다</p>
        <div class="relationship-grid-v2 mt-4">
            <div class="relationship-card-v2" onclick="selectPerson('여자친구', '여자', '연인')">
                <div class="relationship-icon">💑</div>
                <div class="relationship-text">내 여자친구</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('남자친구', '남자', '연인')">
                <div class="relationship-icon">💑</div>
                <div class="relationship-text">내 남자친구</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('와이프', '여자', '연인')">
                <div class="relationship-icon">💍</div>
                <div class="relationship-text">내 와이프</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('남편', '남자', '연인')">
                <div class="relationship-icon">💍</div>
                <div class="relationship-text">내 남편</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('여자 상사', '여자', '동료')">
                <div class="relationship-icon">👔</div>
                <div class="relationship-text">여자 상사</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('남자 상사', '남자', '동료')">
                <div class="relationship-icon">👔</div>
                <div class="relationship-text">남자 상사</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('여자 동료', '여자', '동료')">
                <div class="relationship-icon">💼</div>
                <div class="relationship-text">여자 동료</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('남자 동료', '남자', '동료')">
                <div class="relationship-icon">💼</div>
                <div class="relationship-text">남자 동료</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('여자 친구', '여자', '친구')">
                <div class="relationship-icon">👭</div>
                <div class="relationship-text">여자 친구</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('남자 친구', '남자', '친구')">
                <div class="relationship-icon">👬</div>
                <div class="relationship-text">남자 친구</div>
            </div>
            <div class="relationship-card-v2" onclick="selectPerson('가족', '남자', '가족')">
                <div class="relationship-icon">👨‍👩‍👧‍👦</div>
                <div class="relationship-text">가족</div>
            </div>
        </div>
    </article>


    <!-- MBTI 선택 -->
    <article class="mbti-selector">
        <h2 class="mt-5 text-center">MBTI를 선택하세요</h2>
        <p class="text-center mt-3">
            <span class="badge badge-info badge-lg"><span id="selected-person"></span></span>
        </p>
        <p class="text-center text-muted">모르시면 <a href="https://www.16personalities.com/ko" target="_blank">여기서 테스트</a></p>

        <div class="text-center mt-3 mb-3">
            <button type="button" class="btn btn-warning btn-quiz" onclick='startQuiz();'>
                ⚡ 1분 퀴즈로 빠르게 알아보기
            </button>
        </div>

        <div class="mbti-grid mt-4">
            <button class="mbti-btn" onclick="selectMBTI('ISTJ')">
                <img src="ISTJ.jpg" alt="ISTJ">
                <span>ISTJ</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ISFJ')">
                <img src="ISFJ.jpg" alt="ISFJ">
                <span>ISFJ</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('INFJ')">
                <img src="INFJ.jpg" alt="INFJ">
                <span>INFJ</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('INTJ')">
                <img src="INTJ.jpg" alt="INTJ">
                <span>INTJ</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ISTP')">
                <img src="ISTP.jpg" alt="ISTP">
                <span>ISTP</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ISFP')">
                <img src="ISFP.jpg" alt="ISFP">
                <span>ISFP</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('INFP')">
                <img src="INFP.jpg" alt="INFP">
                <span>INFP</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('INTP')">
                <img src="INTP.jpg" alt="INTP">
                <span>INTP</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ESTP')">
                <img src="ESTP.jpg" alt="ESTP">
                <span>ESTP</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ESFP')">
                <img src="ESFP.jpg" alt="ESFP">
                <span>ESFP</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ENFP')">
                <img src="ENFP.jpg" alt="ENFP">
                <span>ENFP</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ENTP')">
                <img src="ENTP.jpg" alt="ENTP">
                <span>ENTP</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ESTJ')">
                <img src="ESTJ.jpg" alt="ESTJ">
                <span>ESTJ</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ESFJ')">
                <img src="ESFJ.jpg" alt="ESFJ">
                <span>ESFJ</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ENFJ')">
                <img src="ENFJ.jpg" alt="ENFJ">
                <span>ENFJ</span>
            </button>
            <button class="mbti-btn" onclick="selectMBTI('ENTJ')">
                <img src="ENTJ.jpg" alt="ENTJ">
                <span>ENTJ</span>
            </button>
        </div>
        <button type="button" class="btn btn-secondary mt-4" onclick='goBackToRelationship();'>다시 선택</button>

        <!-- AdSense Ad -->
        <div class="mt-4 text-center">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8245797797545485"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </article>

    <!-- MBTI 퀴즈 -->
    <article class="quiz-screen">
        <h2 class="mt-5 text-center">⚡ 1분 MBTI 퀴즈</h2>
        <p class="text-center mt-3">
            <span class="badge badge-info badge-lg"><span id="selected-person-quiz"></span></span>
        </p>

        <!-- 진행률 표시 -->
        <div class="quiz-progress mt-4 mb-4">
            <div class="progress">
                <div id="quiz-progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
            </div>
            <p class="text-center mt-2 text-muted"><span id="quiz-progress-text">1 / 8</span></p>
        </div>

        <!-- 질문 -->
        <div class="quiz-question-box mt-4">
            <h4 id="quiz-question" class="quiz-question"></h4>
        </div>

        <!-- 답변 선택지 -->
        <div id="quiz-answers" class="quiz-answers mt-4">
            <!-- JavaScript로 동적 생성 -->
        </div>

        <button type="button" class="btn btn-secondary mt-4" onclick='goBackToMBTIFromQuiz();'>뒤로 가기</button>
    </article>

    <!-- 문구 선택 -->
    <article class="phrase-selector">
        <h2 class="mt-5 text-center">뭐라고 했나요?</h2>
        <p class="text-center mt-3">
            <span class="badge badge-info badge-lg">
                <span id="selected-person-2"></span>
                (<span id="selected-mbti"></span>)
            </span>
        </p>

        <div class="phrase-list-dating mt-4">
            <div class="phrase-card" onclick="selectPhrase('괜찮아')">
                <div class="phrase-emoji">😶</div>
                <div class="phrase-text">"괜찮아"</div>
            </div>
            <div class="phrase-card" onclick="selectPhrase('나 화 안 났어')">
                <div class="phrase-emoji">💢</div>
                <div class="phrase-text">"나 화 안 났어"</div>
            </div>
            <div class="phrase-card" onclick="selectPhrase('네 맘대로 해')">
                <div class="phrase-emoji">😤</div>
                <div class="phrase-text">"네 맘대로 해"</div>
            </div>
            <div class="phrase-card" onclick="selectPhrase('아무거나 좋아')">
                <div class="phrase-emoji">🤷</div>
                <div class="phrase-text">"아무거나 좋아"</div>
            </div>
            <div class="phrase-card" onclick="selectPhrase('별로 안 바빠')">
                <div class="phrase-emoji">⏰</div>
                <div class="phrase-text">"별로 안 바빠"</div>
            </div>
            <div class="phrase-card" onclick="selectPhrase('나중에 얘기하자')">
                <div class="phrase-emoji">🚫</div>
                <div class="phrase-text">"나중에 얘기하자"</div>
            </div>
            <div class="phrase-card" onclick="selectPhrase('알아서 해')">
                <div class="phrase-emoji">😑</div>
                <div class="phrase-text">"알아서 해"</div>
            </div>
            <div class="phrase-card" onclick="selectPhrase('생각 좀 해볼게')">
                <div class="phrase-emoji">🤔</div>
                <div class="phrase-text">"생각 좀 해볼게"</div>
            </div>
        </div>

        <button type="button" class="btn btn-secondary mt-4" onclick='goBackToMBTI();'>MBTI 다시 선택</button>
    </article>

    <!-- MBTI 궁합 테스트 - 내 MBTI 선택 -->
    <article class="compatibility-selector">
        <h2 class="mt-5 text-center">💕 당신의 MBTI는?</h2>
        <p class="text-center mt-3">
            <span class="badge badge-info badge-lg">
                <span id="compat-partner-label"></span>
                (<span id="compat-partner-mbti"></span>)
            </span>
        </p>
        <p class="text-center text-muted mt-2">당신의 MBTI를 선택하면 궁합을 알려드려요!</p>

        <div class="mbti-grid mt-4">
            <button class="mbti-btn-small" onclick="selectMyMBTI('ISTJ')">ISTJ</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ISFJ')">ISFJ</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('INFJ')">INFJ</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('INTJ')">INTJ</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ISTP')">ISTP</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ISFP')">ISFP</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('INFP')">INFP</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('INTP')">INTP</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ESTP')">ESTP</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ESFP')">ESFP</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ENFP')">ENFP</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ENTP')">ENTP</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ESTJ')">ESTJ</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ESFJ')">ESFJ</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ENFJ')">ENFJ</button>
            <button class="mbti-btn-small" onclick="selectMyMBTI('ENTJ')">ENTJ</button>
        </div>

        <button type="button" class="btn btn-secondary mt-4" onclick='backToPhrasesFromCompat();'>뒤로 가기</button>
    </article>

    <!-- MBTI 궁합 결과 -->
    <article class="compatibility-result">
        <div class="result-header mt-4">
            <h2 class="text-center">💕 MBTI 궁합 결과</h2>
            <p class="text-center mt-3">
                <span class="badge badge-primary badge-lg">
                    <span id="compat-my-mbti"></span>
                </span>
                ♥
                <span class="badge badge-info badge-lg">
                    <span id="compat-partner-mbti-result"></span>
                </span>
            </p>
            <p class="text-center text-muted">
                나 × <span id="compat-partner-name"></span>
            </p>
        </div>

        <div class="compat-grade-box mt-4">
            <div class="compat-emoji" id="compat-emoji"></div>
            <h3 id="compat-grade" class="compat-grade-title"></h3>
            <p id="compat-rating" class="compat-rating"></p>
            <p id="compat-description" class="compat-description"></p>
        </div>

        <div class="compat-section mt-4">
            <h3 class="compat-section-title">💚 우리 관계의 장점</h3>
            <div class="compat-list-box pros-box">
                <ul id="compat-pros"></ul>
            </div>
        </div>

        <div class="compat-section mt-4">
            <h3 class="compat-section-title">⚠️ 주의할 점</h3>
            <div class="compat-list-box cons-box">
                <ul id="compat-cons"></ul>
            </div>
        </div>

        <div class="compat-section mt-4">
            <h3 class="compat-section-title">💡 관계 꿀팁</h3>
            <div class="compat-list-box tips-box">
                <ul id="compat-tips"></ul>
            </div>
        </div>

        <div class="mt-5 text-center action-buttons">
            <button type="button" class="btn btn-primary" onclick='restartFromCompat();'>🔄 처음으로</button>
            <button type="button" class="btn btn-secondary" onclick='backToPhrasesFromCompat();'>← 다른 기능 보기</button>
        </div>
    </article>

    <!-- 선물 추천 - 상황 선택 -->
    <article class="gift-occasion-selector">
        <h2 class="mt-5 text-center">💝 어떤 상황인가요?</h2>
        <p class="text-center mt-3">
            <span class="badge badge-info badge-lg">
                <span id="gift-person"></span>
                (<span id="gift-mbti"></span>)
            </span>
        </p>

        <div class="occasion-grid mt-4">
            <div class="occasion-card" onclick="selectGiftOccasion('생일')">
                <div class="occasion-icon">🎂</div>
                <div class="occasion-text">생일</div>
            </div>
            <div class="occasion-card" onclick="selectGiftOccasion('기념일')">
                <div class="occasion-icon">💍</div>
                <div class="occasion-text">기념일</div>
            </div>
            <div class="occasion-card" onclick="selectGiftOccasion('사과')">
                <div class="occasion-icon">🙏</div>
                <div class="occasion-text">사과할 때</div>
            </div>
            <div class="occasion-card" onclick="selectGiftOccasion('깜짝선물')">
                <div class="occasion-icon">🎁</div>
                <div class="occasion-text">깜짝 선물</div>
            </div>
        </div>

        <button type="button" class="btn btn-secondary mt-4" onclick='backToPhrasesFromGift();'>뒤로 가기</button>
    </article>

    <!-- 선물 추천 결과 -->
    <article class="gift-result">
        <div class="result-header mt-4">
            <h2 class="text-center">💝 완벽한 선물 추천</h2>
            <p class="text-center mt-3">
                <span class="badge badge-warning badge-lg">
                    <span id="gift-occasion-title"></span> 선물
                </span>
                <br>
                <span class="badge badge-info badge-lg mt-2">
                    <span id="gift-person-label"></span>
                    (<span id="gift-mbti-label"></span>)
                </span>
            </p>
        </div>

        <div class="gift-section mt-4">
            <h3 class="gift-section-title">✅ 추천 선물</h3>
            <div class="gift-list-box recommended-box">
                <ul id="gift-recommended-list"></ul>
            </div>
        </div>

        <div class="gift-section mt-4">
            <h3 class="gift-section-title">❌ 피해야 할 선물</h3>
            <div class="gift-list-box avoid-box">
                <ul id="gift-avoid-list"></ul>
            </div>
        </div>

        <div class="mt-5 text-center action-buttons">
            <button type="button" class="btn btn-primary" onclick='restartFromGift();'>🔄 처음으로</button>
            <button type="button" class="btn btn-secondary" onclick='backToPhrasesFromGift();'>← 다른 기능 보기</button>
        </div>
    </article>

    <!-- 데이트 코스 추천 결과 -->
    <article class="date-result">
        <div class="result-header mt-4">
            <h2 class="text-center">💑 완벽한 데이트 코스</h2>
            <p class="text-center mt-3">
                <span class="badge badge-success badge-lg">
                    <span id="date-person-label"></span>
                    (<span id="date-mbti-label"></span>)
                </span>
            </p>
        </div>

        <div class="date-courses mt-4">
            <h3 class="date-section-title">🌟 추천 데이트 코스</h3>
            <div id="date-courses-list"></div>
        </div>

        <div class="date-tips mt-5">
            <h3 class="date-section-title">💡 데이트 팁</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="tips-box do-tips">
                        <h4>✅ 이렇게 하세요</h4>
                        <ul id="date-tips-do"></ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="tips-box dont-tips">
                        <h4>❌ 피하세요</h4>
                        <ul id="date-tips-dont"></ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-5 text-center action-buttons">
            <button type="button" class="btn btn-primary" onclick='restartFromDate();'>🔄 처음으로</button>
            <button type="button" class="btn btn-secondary" onclick='backToPhrasesFromDate();'>← 다른 기능 보기</button>
        </div>
    </article>

    <!-- 결과화면 -->
    <article class="result">
        <div class="result-header mt-4">
            <h2 class="result-title">"<span id="result-phrase"></span>"</h2>
            <p class="result-info">
                <span id="result-person"></span>
                (<span id="result-mbti"></span>)
            </p>
        </div>

        <!-- 진짜 의미 -->
        <div class="result-section mt-4">
            <h3 class="section-title">💡 진짜 의미</h3>
            <div class="meaning-card">
                <div id="true-meaning"></div>
            </div>
        </div>

        <!-- 대처법 -->
        <div class="result-section mt-4">
            <h3 class="section-title">✅ 이렇게 대처하세요</h3>
            <div class="solution-card do-card">
                <div class="solution-header">✅ 해야 할 것</div>
                <ul id="do-list"></ul>
            </div>
            <div class="solution-card dont-card mt-3">
                <div class="solution-header">❌ 하지 말아야 할 것</div>
                <ul id="dont-list"></ul>
            </div>
        </div>

        <!-- AdSense Ad -->
        <div class="mt-4 text-center">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8245797797545485"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <!-- 액션 버튼 -->
        <div class="mt-5 text-center action-buttons">
            <button type="button" class="btn btn-primary btn-restart" onclick='restart();'>🔄 다시 하기</button>
            <button type="button" class="btn btn-success btn-share" onclick='shareResult();'>📤 친구에게 공유</button>
        </div>

        <div class="share addthis_inline_share_toolbox mt-4"></div>
    </article>

    <!-- 갈등 상황 시뮬레이터 -->
    <article class="simulator-screen">
        <div class="simulator-header mt-4">
            <h2 id="simulator-title" class="text-center"></h2>
            <p class="text-center simulator-emoji" id="simulator-emoji"></p>
            <p class="text-center text-muted">
                <span class="badge badge-primary"><span id="selected-person-sim"></span> (<span id="selected-mbti-sim"></span>)</span>
                단계 <span id="simulator-progress"></span>
            </p>
        </div>

        <!-- 상황 설명 -->
        <div class="simulator-situation mt-4">
            <h4>📖 상황</h4>
            <p id="simulator-situation"></p>
        </div>

        <!-- 선택지 -->
        <div id="simulator-choices" class="simulator-choices mt-4">
            <h4>💬 어떻게 할까요?</h4>
            <!-- JavaScript로 동적 생성 -->
        </div>

        <!-- 상대방 반응 -->
        <div id="simulator-reaction" class="simulator-reaction mt-4" style="display: none;">
            <h4>💭 <span id="selected-person-reaction"></span>의 반응</h4>
            <div class="reaction-box">
                <div class="reaction-emotion" id="reaction-emotion"></div>
                <div class="reaction-text" id="reaction-text"></div>
                <div class="reaction-analysis" id="reaction-analysis"></div>
            </div>

            <div class="mt-4 text-center">
                <button id="next-stage-btn" type="button" class="btn btn-primary btn-lg" onclick='nextSimulatorStage();'>다음 단계로 →</button>
                <button id="finish-simulator-btn" type="button" class="btn btn-success btn-lg" onclick='finishSimulator();'>결과 보기</button>
            </div>
        </div>
    </article>

    <!-- 시뮬레이터 결과 -->
    <article class="simulator-result">
        <div class="result-header mt-4">
            <h2 class="text-center">🎮 시뮬레이터 결과</h2>
            <p class="text-center mt-3">
                <span class="badge badge-info badge-lg">
                    <span id="result-person"></span>
                    (<span id="result-mbti-type"></span>)
                </span>
            </p>
        </div>

        <div class="result-grade-box mt-4">
            <div class="grade-emoji" id="result-emoji"></div>
            <h3 id="result-grade" class="grade-title"></h3>
            <p id="result-score" class="grade-score"></p>
        </div>

        <div class="result-feedback mt-4">
            <h4>📝 피드백</h4>
            <p id="result-feedback"></p>
        </div>

        <div class="mt-5 text-center action-buttons">
            <button type="button" class="btn btn-primary" onclick='restartFromSimulator();'>🔄 처음으로</button>
            <button type="button" class="btn btn-warning" onclick='retrySimulator();'>🎮 다시 도전</button>
        </div>
    </article>

    <!-- Version Info -->
    <div class="version-info text-center mt-3">
        <small class="text-muted">v1.5.0</small>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <script src="data.js"></script>
    <script src="quiz.js"></script>
    <script src="simulator.js"></script>
    <script src="gift.js"></script>
    <script src="date.js"></script>
    <script src="compatibility.js"></script>
    <script>
        let personLabel = '';  // 표시할 레이블 (예: "내 여자친구")
        let gender = '';       // 내부 처리용 성별
        let relationship = ''; // 내부 처리용 관계
        let mbti = '';
        let phrase = '';
        let currentFeature = ''; // 현재 선택한 기능

        // 각 기능 진입 함수들
        function startTranslator() {
            currentFeature = 'translator';
            showRelationship();
        }

        function startQuizFlow() {
            currentFeature = 'quiz';
            // 퀴즈는 관계만 선택하고 바로 MBTI 선택 화면으로 (퀴즈 버튼 보여주기 위해)
            showRelationship();
        }

        function startSimulatorFlow() {
            currentFeature = 'simulator';
            showRelationship();
        }

        function startGiftFlow() {
            currentFeature = 'gift';
            showRelationship();
        }

        function startDateFlow() {
            currentFeature = 'date';
            showRelationship();
        }

        function startCompatFlow() {
            currentFeature = 'compat';
            showRelationship();
        }

        function showRelationship() {
            $(".start").hide();
            $(".relationship-selector").show();
            window.scrollTo(0, 0);
        }

        function selectPerson(label, g, rel) {
            personLabel = label;
            gender = g;
            relationship = rel;
            $("#selected-person").text(label);
            $("#selected-person-2").text(label);
            $(".relationship-selector").hide();
            $(".mbti-selector").show();
            window.scrollTo(0, 0);
        }

        function goBackToRelationship() {
            $(".mbti-selector").hide();
            $(".phrase-selector").hide();
            $(".relationship-selector").show();
            window.scrollTo(0, 0);
        }

        function selectMBTI(m) {
            mbti = m;
            $("#selected-mbti").text(m);
            $(".mbti-selector").hide();

            // 기능별 분기
            if (currentFeature === 'translator') {
                $(".phrase-selector").show();
            } else if (currentFeature === 'quiz') {
                startQuiz();
            } else if (currentFeature === 'simulator') {
                startSimulator("late");
            } else if (currentFeature === 'gift') {
                startGiftRecommendation();
            } else if (currentFeature === 'date') {
                startDateRecommendation();
            } else if (currentFeature === 'compat') {
                startCompatibilityTest();
            } else {
                $(".phrase-selector").show();
            }

            window.scrollTo(0, 0);
        }

        function goBackToMBTI() {
            $(".phrase-selector").hide();
            $(".mbti-selector").show();
            window.scrollTo(0, 0);
        }

        function selectPhrase(p) {
            phrase = p;
            showResults();
        }

        function showResults() {
            // 결과 표시
            $("#result-phrase").text(phrase);
            $("#result-person").text(personLabel);
            $("#result-mbti").text(mbti);

            const data = phraseData[phrase][gender][mbti];

            $("#true-meaning").html(data.meaning);

            // Do list
            let doHTML = '';
            data.solution.do.forEach(item => {
                doHTML += `<li>${item}</li>`;
            });
            $("#do-list").html(doHTML);

            // Don't list
            let dontHTML = '';
            data.solution.dont.forEach(item => {
                dontHTML += `<li>${item}</li>`;
            });
            $("#dont-list").html(dontHTML);

            $(".phrase-selector").hide();
            $(".result").show();
            window.scrollTo(0, 0);
        }

        function restart() {
            personLabel = '';
            relationship = '';
            gender = '';
            mbti = '';
            phrase = '';
            $(".result").hide();
            $(".start").show();
            window.scrollTo(0, 0);
        }

        function shareResult() {
            const text = `${personLabel}(${mbti})가 "${phrase}"라고 할 때 진짜 의미!\n\n💡 ${phraseData[phrase][gender][mbti].meaning}\n\n당신도 확인해보세요!\nhttps://mbtiexplain.netlify.app`;

            if (navigator.share) {
                navigator.share({
                    title: '상대방의 말, 진짜 의미는?',
                    text: text
                });
            } else {
                alert('공유할 내용:\n\n' + text);
            }
        }
    </script>

    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ffd42a25cb08056"></script>
</body>
</html>
